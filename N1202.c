
#include "stm32f10x_conf.h"
#include"N1202.h"

unsigned char N1202_cache[lcd_x_pix][lcd_y_pix];

void N1202_CS (uint8_t status){GPIO_WriteBit(CS_Port,CS_PIN,status);}
void N1202_RES(uint8_t status){GPIO_WriteBit(RES_Port,RES_PIN,status);}
void N1202_SCL(uint8_t status){GPIO_WriteBit(SCL_Port,SCL_PIN,status);}
void N1202_SDA(uint8_t status){GPIO_WriteBit(SDA_Port,SDA_PIN,status);}
void N1202_BL (uint8_t status){GPIO_WriteBit(BL_Port,BL_PIN,status);}

char FontLookup[97][5]={
{0x00, 0x00, 0x00, 0x00, 0x00},// (space)
{0x00, 0x00, 0x5F, 0x00, 0x00},// !
{0x00, 0x07, 0x00, 0x07, 0x00},// "
{0x14, 0x7F, 0x14, 0x7F, 0x14},// #
{0x24, 0x2A, 0x7F, 0x2A, 0x12},// $
{0x23, 0x13, 0x08, 0x64, 0x62},// %
{0x36, 0x49, 0x55, 0x22, 0x50},// &
{0x00, 0x05, 0x03, 0x00, 0x00},// '
{0x00, 0x1C, 0x22, 0x41, 0x00},// (
{0x00, 0x41, 0x22, 0x1C, 0x00},// )
{0x08, 0x2A, 0x1C, 0x2A, 0x08},// *
{0x08, 0x08, 0x3E, 0x08, 0x08},// +
{0x00, 0x50, 0x30, 0x00, 0x00},// ,
{0x08, 0x08, 0x08, 0x08, 0x08},// -
{0x00, 0x30, 0x30, 0x00, 0x00},// .
{0x20, 0x10, 0x08, 0x04, 0x02},// /
{0x3E, 0x51, 0x49, 0x45, 0x3E},// 0
{0x00, 0x42, 0x7F, 0x40, 0x00},// 1
{0x42, 0x61, 0x51, 0x49, 0x46},// 2
{0x21, 0x41, 0x45, 0x4B, 0x31},// 3
{0x18, 0x14, 0x12, 0x7F, 0x10},// 4
{0x27, 0x45, 0x45, 0x45, 0x39},// 5
{0x3C, 0x4A, 0x49, 0x49, 0x30},// 6
{0x01, 0x71, 0x09, 0x05, 0x03},// 7
{0x36, 0x49, 0x49, 0x49, 0x36},// 8
{0x06, 0x49, 0x49, 0x29, 0x1E},// 9
{0x00, 0x36, 0x36, 0x00, 0x00},// :
{0x00, 0x56, 0x36, 0x00, 0x00},// ;
{0x00, 0x08, 0x14, 0x22, 0x41},// <
{0x14, 0x14, 0x14, 0x14, 0x14},// =
{0x41, 0x22, 0x14, 0x08, 0x00},// >
{0x02, 0x01, 0x51, 0x09, 0x06},// ?
{0x32, 0x49, 0x79, 0x41, 0x3E},// @
{0x7E, 0x11, 0x11, 0x11, 0x7E},// A
{0x7F, 0x49, 0x49, 0x49, 0x36},// B
{0x3E, 0x41, 0x41, 0x41, 0x22},// C
{0x7F, 0x41, 0x41, 0x22, 0x1C},// D
{0x7F, 0x49, 0x49, 0x49, 0x41},// E
{0x7F, 0x09, 0x09, 0x01, 0x01},// F
{0x3E, 0x41, 0x41, 0x51, 0x32},// G
{0x7F, 0x08, 0x08, 0x08, 0x7F},// H
{0x00, 0x41, 0x7F, 0x41, 0x00},// I
{0x20, 0x40, 0x41, 0x3F, 0x01},// J
{0x7F, 0x08, 0x14, 0x22, 0x41},// K
{0x7F, 0x40, 0x40, 0x40, 0x40},// L
{0x7F, 0x02, 0x04, 0x02, 0x7F},// M
{0x7F, 0x04, 0x08, 0x10, 0x7F},// N
{0x3E, 0x41, 0x41, 0x41, 0x3E},// O
{0x7F, 0x09, 0x09, 0x09, 0x06},// P
{0x3E, 0x41, 0x51, 0x21, 0x5E},// Q
{0x7F, 0x09, 0x19, 0x29, 0x46},// R
{0x46, 0x49, 0x49, 0x49, 0x31},// S
{0x01, 0x01, 0x7F, 0x01, 0x01},// T
{0x3F, 0x40, 0x40, 0x40, 0x3F},// U
{0x1F, 0x20, 0x40, 0x20, 0x1F},// V
{0x7F, 0x20, 0x18, 0x20, 0x7F},// W
{0x63, 0x14, 0x08, 0x14, 0x63},// X
{0x03, 0x04, 0x78, 0x04, 0x03},// Y
{0x61, 0x51, 0x49, 0x45, 0x43},// Z
{0x00, 0x00, 0x7F, 0x41, 0x41},// [
{0x02, 0x04, 0x08, 0x10, 0x20},// "\"
{0x41, 0x41, 0x7F, 0x00, 0x00},// ]
{0x04, 0x02, 0x01, 0x02, 0x04},// ^
{0x40, 0x40, 0x40, 0x40, 0x40},// _
{0x00, 0x01, 0x02, 0x04, 0x00},// `
{0x20, 0x54, 0x54, 0x54, 0x78},// a
{0x7F, 0x48, 0x44, 0x44, 0x38},// b
{0x38, 0x44, 0x44, 0x44, 0x20},// c
{0x38, 0x44, 0x44, 0x48, 0x7F},// d
{0x38, 0x54, 0x54, 0x54, 0x18},// e
{0x08, 0x7E, 0x09, 0x01, 0x02},// f
{0x08, 0x14, 0x54, 0x54, 0x3C},// g
{0x7F, 0x08, 0x04, 0x04, 0x78},// h
{0x00, 0x44, 0x7D, 0x40, 0x00},// i
{0x20, 0x40, 0x44, 0x3D, 0x00},// j
{0x00, 0x7F, 0x10, 0x28, 0x44},// k
{0x00, 0x41, 0x7F, 0x40, 0x00},// l
{0x7C, 0x04, 0x18, 0x04, 0x78},// m
{0x7C, 0x08, 0x04, 0x04, 0x78},// n
{0x38, 0x44, 0x44, 0x44, 0x38},// o
{0x7C, 0x14, 0x14, 0x14, 0x08},// p
{0x08, 0x14, 0x14, 0x18, 0x7C},// q
{0x7C, 0x08, 0x04, 0x04, 0x08},// r
{0x48, 0x54, 0x54, 0x54, 0x20},// s
{0x04, 0x3F, 0x44, 0x40, 0x20},// t
{0x3C, 0x40, 0x40, 0x20, 0x7C},// u
{0x1C, 0x20, 0x40, 0x20, 0x1C},// v
{0x3C, 0x40, 0x30, 0x40, 0x3C},// w
{0x44, 0x28, 0x10, 0x28, 0x44},// x
{0x0C, 0x50, 0x50, 0x50, 0x3C},// y
{0x44, 0x64, 0x54, 0x4C, 0x44},// z
{0x00, 0x08, 0x36, 0x41, 0x00},// {
{0x00, 0x00, 0x7F, 0x00, 0x00},// |
{0x00, 0x41, 0x36, 0x08, 0x00},// }
{0x08, 0x1C, 0x2A, 0x08, 0x08}, // <-
{0x08, 0x08, 0x2A, 0x1C, 0x08},// ->
};


char font_SEG[13][36]={
    {0xFC,0xF9,0xF3,0x07,0x07,0x07,0x07,0x07,0x07,0xF3,0xF9,0xFC,0xF7,0xE3,0xC1,0x00,0x00,0x00,0x00,0x00,0x00,0xC1,0xE3,0xF7,0x1F,0x4F,0x67,0x70,0x70,0x70,0x70,0x70,0x70,0x67,0x4F,0x1F},//0
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF8,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC1,0xE3,0xF7,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x0F,0x1F},//1
    {0x00,0x01,0x03,0x07,0x07,0x07,0x07,0x07,0x07,0xF3,0xF9,0xFC,0xF0,0xE0,0xC8,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0x09,0x03,0x07,0x1F,0x4F,0x67,0x70,0x70,0x70,0x70,0x70,0x70,0x60,0x40,0x00},//2
    {0x00,0x01,0x03,0x07,0x07,0x07,0x07,0x07,0x07,0xF3,0xF9,0xFC,0x00,0x00,0x08,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0xC9,0xE3,0xF7,0x00,0x40,0x60,0x70,0x70,0x70,0x70,0x70,0x70,0x67,0x4F,0x1F},//3
    {0xFC,0xF8,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF8,0xFC,0x07,0x03,0x09,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0xC9,0xE3,0xF7,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x0F,0x1F},//4
    {0xFC,0xF9,0xF3,0x07,0x07,0x07,0x07,0x07,0x07,0x03,0x01,0x00,0x07,0x03,0x09,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0xC8,0xE0,0xF0,0x00,0x40,0x60,0x70,0x70,0x70,0x70,0x70,0x70,0x67,0x4F,0x1F},//5
    {0xFC,0xF9,0xF3,0x07,0x07,0x07,0x07,0x07,0x07,0x03,0x01,0x00,0xF7,0xE3,0xC9,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0xC8,0xE0,0xF0,0x1F,0x4F,0x67,0x70,0x70,0x70,0x70,0x70,0x70,0x67,0x4F,0x1F},//6
    {0x00,0x01,0x03,0x07,0x07,0x07,0x07,0x07,0x07,0xF3,0xF9,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC1,0xE3,0xF7,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x0F,0x1F},//7
    {0xFC,0xF9,0xF3,0x07,0x07,0x07,0x07,0x07,0x07,0xF3,0xF9,0xFC,0xF7,0xE3,0xC9,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0xC9,0xE3,0xF7,0x1F,0x4F,0x67,0x70,0x70,0x70,0x70,0x70,0x70,0x67,0x4F,0x1F},//8
    {0xFC,0xF9,0xF3,0x07,0x07,0x07,0x07,0x07,0x07,0xF3,0xF9,0xFC,0x07,0x03,0x09,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0xC9,0xE3,0xF7,0x00,0x40,0x60,0x70,0x70,0x70,0x70,0x70,0x70,0x67,0x4F,0x1F},//9
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x1E,0xFE,0xF2,0x80,0x00,0x80,0xF2,0xFE,0x1E,0x02,0x00,0x00,0x00,0x00,0x07,0x3F,0x7C,0x3F,0x07,0x00,0x00,0x00},//V
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xC0,0xC0,0xC0,0xC0,0xFF,0xFF,0xFF,0x01,0x40,0x7F,0x7F,0x7F,0x01,0x01,0x01,0x01,0x7F,0x7F,0x7F,0x40},//H
    {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x78,0x7C,0x6F,0x63,0x61,0x00,0x00,0x00,0x00,0x00,0x00},//z
    {0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x09,0x10,0x90,0xC9,0x66,0x30,0x18,0x0C,0x06,0x00,0x00,0x0C,0x06,0x03,0x01,0x0C,0x12,0x21,0x21,0x12,0x0C,0x00},
    {0x00,0x80,0x40,0x40,0x40,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x08,0x10,0x10,0x90,0xC8,0x67,0x30,0x18,0x0C,0x06,0x03,0x18,0x0C,0x06,0x03,0x01,0x1C,0x22,0x41,0x41,0x41,0x22,0x1C}//%

};

uint8_t bi_to_by (uint8_t byte,uint8_t select){
    if(byte>>select & 0x01)return 1;
     else return 0;
}

void N1202_Write(uint8_t DC,uint16_t c){

	int i;

	N1202_CS(0);

	N1202_SCL(0);
		N1202_SDA(DC);
	N1202_SCL(1);

      for(i=0;i<8;i++){
        N1202_SCL(0);
            if(c & 0x80)
               N1202_SDA(1);
            else
               N1202_SDA(0);
        N1202_SCL(1);
        c <<= 1;
       }

	N1202_CS(1);
}

void N1202_clear(void){
unsigned char 			x, r;

	N1202_GotoXY(0, 0);
	N1202_Write(0, 0xAE); 					// disable display;

	//fill LCD and the video buffer with zero!
	for(r=0; r<lcd_y_pix/8+1; r++)
	{
		for(x=0; x<lcd_x_pix; x++)
		{
				N1202_cache[x][r]= 0x00;
				N1202_GotoXY(x,r);
			    N1202_Write(1, 0x00);
		}
	}

	N1202_Write(0, 0xAF);
}

void N1202_Init(void){

    GPIO_PIN_Config(CS_Port , CS_PIN , CS_Mode , GPIO_Speed_50MHz);
    GPIO_PIN_Config(RES_Port, RES_PIN, RES_Mode, GPIO_Speed_50MHz);
    GPIO_PIN_Config(SCL_Port, SCL_PIN, SCL_Mode, GPIO_Speed_50MHz);
    GPIO_PIN_Config(SDA_Port, SDA_PIN, SDA_Mode, GPIO_Speed_50MHz);
    GPIO_PIN_Config(BL_Port , BL_PIN , BL_Mode , GPIO_Speed_50MHz);

	N1202_CS(0);
//	N1202_SDA(0);
//	N1202_SCL(0);
	N1202_RES(0);
	N1202_BL(1);

	//delay_ms(10);							//min. 5ms

	N1202_RES(1);

N1202_Write(0,0x23); // write VOP register



N1202_Write(0,0x90);
N1202_Write(0,0xA4); // all on/normal display
N1202_Write(0,0x2F); // Power control set(charge pump on/off)
N1202_Write(0,0x40); // set start row address = 0
N1202_Write(0,0xB0); // set Y-address = 0
N1202_Write(0,0x10); // set X-address, upper 3 bits
N1202_Write(0,0x0);  // set X-address, lower 4 bits
//N1202_Write(0,0xC8); // mirror Y axis (about X axis)
//N1202_Write(0,0xa1); // Invert screen in horizontal axis
N1202_Write(0,0xAC); // set initial row (R0) of the display
N1202_Write(0,0x07);
//lcd_write(CMD,0xF9);
N1202_Write(0,0xAF); // display ON/OFF


N1202_clear();              // clear LCD

N1202_Write(0,0xA6);      // normal display (non inverted)
 N1202_Write(0,0xAF);
}

void N1202_Update(void){

		unsigned char 			x, r;
		//N11_Write(cmd, 0xAE); 					// disable display;
         N1202_GotoXY(0,0);
		//serialize the video buffer to LCD
		for(r=0; r<lcd_y_pix/8+1; r++)
			for(x=0; x<lcd_x_pix; x++)
				N1202_Write(1, N1202_cache[x][r]);

		//N11_Write(cmd, 0xAF); 					// enable display;

}

void N1202_Contrast(uint8_t cont){
	N1202_Write(0, 0x20);
	N1202_Write(0,0x9f);
	N1202_Write(0, 0x27);
	N1202_Write(0, 0xE1);
}

void N1202_GotoXY(unsigned char x, unsigned char y){
    N1202_Write(0, (0xB0| (y &0x0F)));        	//Y axis initialisation: 0100 rrrr
	N1202_Write(0, (0x00| (x &0x0F)));        	//X axis initialisation: 0000 xxxx  (x3 x2 x1 x0)
	N1202_Write(0, (0x10|((x >>4) &0x07)));     //X axis initialisation: 0010 0xxx  (x6 x5 x4)
}

void N1202_Draw_pixel(uint8_t x,uint8_t y,uint8_t color){

    unsigned char			r, pd;

		if ((x > lcd_x_pix-1) || (y > lcd_y_pix-1))			return;				//exit if coordinates are not legal

		r = y / 8;
		pd = y % 8;

		switch(color){

		    case 0:{cbi(N1202_cache[x][r], pd);};break;
		    case 1:{sbi(N1202_cache[x][r], pd);};break;
            case 2:{inv_bit(N1202_cache[x][r], pd);};break;

		}

		N1202_GotoXY(x, r);
		N1202_Write(1, N1202_cache[x][r]);
}

void N1202_write_y(uint8_t x,uint8_t y,uint8_t data[7]){

    uint8_t i;

    for(i=0;i<=7;i++){
            N1202_Draw_pixel(x,y+i,data[i]);
    }
}

void  N1202_WriteChar(uint8_t x, uint8_t y,char c,uint8_t color) {
	uint8_t xx,yy,i=0;
	uint16_t ch = 0;
	uint8_t cache[7];

        if(color){
          N1202_Yline_len(x-1,y,8,1);
           N1202_Yline_len(x+5,y-1,9,1);
            N1202_Xline_len(x-1,y-1,6,1);
        };

	if(x+5>lcd_x_pix || y+7>lcd_y_pix)         return;
	for(xx=x;xx<x+5;xx++){
        if(color)ch=~FontLookup[c-31][xx-(x+5)];
         else ch=FontLookup[c-31][xx-(x+5)];
        for(yy=y;yy<y+8;yy++){
          N1202_Draw_pixel(xx,yy,bi_to_by(ch,yy-y));
        }
	}
}

void N1202_Xline_len(uint8_t x,uint8_t y,uint8_t len,uint8_t color){

    uint8_t x2;
    x2=x+len;

    for(;x<x2;x++){N1202_Draw_pixel(x,y,color);}
}

void N1202_Yline_len(uint8_t x,uint8_t y,uint8_t len,uint8_t color){

    uint8_t y2;
    y2=y+len;

    for(;y<y2;y++){N1202_Draw_pixel(x,y,color);}

}

void N1202_Draw_FillRect(uint8_t x,uint8_t y,uint8_t width,uint8_t height,uint8_t color){

  uint8_t y2;
   y2=y+height;

//   N1202_Write(0, 0xAE);

    for(;y<y2;y++) N1202_Xline_len(x,y,width,color);

//  N1202_Write(0, 0xAF);

}

void N1202_text(uint8_t x,uint8_t y,char * message,uint8_t color){

    if((x==0 || y==0) && color || (x<0 || y<0)) return; //return if text position false

       while (*message){
         N1202_WriteChar(x,y,*message++,color);
          x=x+6;
       }

//      N1202_Write(0,0xAF);

}

uint8_t N1202_show_pic (uint8_t *pic,uint8_t xpos ,uint8_t ypos,uint8_t color){

  uint8_t data [8];
  uint16_t i,repeat=0,pic_x,pic_y,line;
  uint8_t x,y;

  pic_x=pic[0]; pic_y=pic[1];

  if( (pic_x+xpos)>lcd_x_pix) return 0;
  if( (pic_y+ypos)>lcd_y_pix) return 0;

  N1202_Write(0, 0xA4);

 for(y=ypos;y<pic_y+ypos;y=y+8){

   for(x=xpos;x<pic_x+xpos;x++){

         repeat++;

           for(i=0;i<8;i++){
                if(color==0){if(pic[repeat+1] & 1 << i) data[i]=1;else data[i]=0;};
                if(color==1){if(pic[repeat+1] & 1 << i) data[i]=0;else data[i]=1;};
           }
           N1202_write_y(x,y,data);
    }

 }
 N1202_Write(0, 0xAF);
}

void N1202_SEG_WriteChar(uint8_t x,uint8_t y,char num){

    if(x+12>lcd_x_pix || y+5>lcd_y_pix) return;

    uint8_t xx,yy,repeat=0;
    int numi=num-'0';

     for(xx=0;xx<12;xx++){
        N1202_GotoXY(xx+x,yy+y);
        N1202_Write(1,font_SEG[numi][xx]);

        N1202_GotoXY(xx+x,yy+y+1);
        N1202_Write(1,font_SEG[numi][xx+12]);

        N1202_GotoXY(xx+x,yy+y+2);
        N1202_Write(1,font_SEG[numi][xx+24]);
    }

}

void N1202_SEG_WriteString(uint8_t x,uint8_t y,char * message){

     while (*message){
         N1202_SEG_WriteChar(x,y,*message++);
          x=x+14;
    }
}

void N1202_Show_Chart(uint16_t v[10]){
    uint16_t values[10];
    for(int i=0;i<10;i++){
        values[i]=v[i];
    }
    char s[20];
    uint16_t _min=0,_max=0;
    _min=values[0];
    for(int i=0;i<10;i++){
        if(_min>=values[i])_min=values[i];
        if(_max<=values[i])_max=values[i];
    }
    sprintf(s,"%d ",_min);
    N1202_text(0,56,s,0);
    sprintf(s,"%d(m/s) ",_max);
    N1202_text(0,0,s,0);

    float tmp=0.0;
    for(int i=0;i<10;i++){
        values[i]-=_min;
        tmp=((_max-_min)/53.0);
        tmp+=(tmp/2.0);
        values[i]=(int)((float)values[i]/tmp);
    }


    //        _max=(int)(((float)_max/_min/2)*10);
    //        _min=1;

//    _min=values[0];
//    for(int i=0;i<10;i++){
//        if(_min>values[i])_min=values[i];
//        if(_max<values[i])_max=values[i];
//    }

    N1202_Xline_len(0,54,96,1);
    N1202_Yline_len(0,8,47,1);

    N1202_Draw_pixel(1,9,1);
    N1202_Draw_pixel(2,10,1);
    N1202_Draw_pixel(3,11,1);

    N1202_Draw_pixel(94,53,1);
    N1202_Draw_pixel(93,52,1);
    N1202_Draw_pixel(92,51,1);

    N1202_Draw_pixel(94,55,1);
    N1202_Draw_pixel(93,56,1);
    N1202_Draw_pixel(92,57,1);


    sprintf(s,"< P:%d > ",1);
    N1202_text(30,56,s,0);
    int limit=_max-_min;
    int x=0,y=0,lim_x=0,xx=0;
    float p_x=0,p_xx=0;
    for(int i=0;i<10;i++){

            lim_x=(values[i]>values[i+1]?values[i]:values[i+1])-(values[i]<values[i+1]?values[i]:values[i+1]);
            p_x=(float)lim_x/10;

            //sprintf(S,"%d",p_x);
            //N1202_text(0,i,S);


        for(int j=0;j<10;j++){
            y=(i*10)+j;
            x=60-values[i]-10;
            if(j==0){
               N1202_Draw_pixel(y,x,1);
               N1202_Draw_pixel(y,x+1,1);
               N1202_Draw_pixel(y,x-1,1);

               N1202_Draw_pixel(y-1,x,1);
               N1202_Draw_pixel(y-1,x+1,1);
               N1202_Draw_pixel(y-1,x-1,1);

               N1202_Draw_pixel(y+1,x,1);
               N1202_Draw_pixel(y+1,x+1,1);
               N1202_Draw_pixel(y+1,x-1,1);
            }else {
                if(i<9){
                        if(values[i]>values[i+1]){
                            p_xx+=p_x;
                            xx = (int)(x+p_xx);
                            N1202_Draw_pixel(y,xx,1);
                        }else{
                            p_xx+=p_x;
                            xx = (int)(x-p_xx);
                            N1202_Draw_pixel(y,xx,1);
                        }

                }else{

                }
            }
        }
        p_xx=0;

}
}
